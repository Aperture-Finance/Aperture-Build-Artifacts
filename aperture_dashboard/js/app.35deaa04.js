(function(e){function t(t){for(var r,s,u=t[0],a=t[1],l=t[2],m=0,p=[];m<u.length;m++)s=u[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);c&&c(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var a=n[u];0!==i[a]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=a;o.push([1,"chunk-vendors"]),n()})({0:function(e,t){},"034f":function(e,t,n){"use strict";n("85ec")},1:function(e,t,n){e.exports=n("56d7")},10:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),r("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v("Aperture Dashboard")]),n("h3",[e._v("Total value of open positions (TVL)")]),n("p",[e._v(e._s(e.getTVL))]),n("h3",[e._v("Total initial investment size of open positions")]),n("p",[e._v(e._s(e.getSumOpenPositionInitialSizes))]),n("h3",[e._v("Total initial investment size of ALL positions")]),n("p",[e._v(e._s(e.getSumAllPositionInitialSizes))]),n("h3",[e._v("Total contribution to Spectrum TVL from open positions")]),n("p",[e._v(e._s(e.getSumOpenPositionSpectrumTVLContributions))]),n("h3",[e._v("Sum of unrealized gain across open positions with unrealized gain")]),n("p",[e._v(e._s(e.getSumUnrealizedGain))]),n("h3",[e._v("Sum of short farm UST value across open positions")]),n("p",[e._v(e._s(e.getSumShortFarmValueAcrossOpenPositions))]),n("h3",[e._v(" Sum of short farm UST value across open positions with unrealized gain ")]),n("p",[e._v(" "+e._s(e.getSumShortFarmValueAcrossOpenPositionsWithUnrealizedGain)+" ")]),n("h3",[e._v("TVL per mAsset")]),n("table",{staticStyle:{"margin-left":"auto","margin-right":"auto"}},[e._m(0),e._l(e.mAssetToTVL,(function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(r))]),n("td",[e._v(e._s(t.toFormat(6)))])])}))],2),n("h3",[e._v("Total Positions")]),n("p",[e._v(e._s(e.openedPositions.length+e.closedPositions.length))]),n("h3",[e._v("Open Positions")]),n("ul",[n("li",[e._v(" "+e._s(e.openedPositions.length)+" ")])]),n("h3",[e._v("Total Closed Positions")]),n("ul",[n("li",[e._v(" "+e._s(e.closedPositions.length)+" ")])]),n("h3",[e._v("Unique Position Holders: "+e._s(Object.keys(e.uniqueWallets).length))]),n("ul",e._l(e.uniqueWallets,(function(t,r){return n("li",{key:r},[e._v(" "+e._s(r)+": "+e._s(t)+" ")])})),0)])},u=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("mAsset")]),n("th",[e._v("TVL")])])}],a=n("1da1"),l=(n("d3b7"),n("820e"),n("3ca3"),n("ddb0"),n("4e82"),n("25f0"),n("96cf"),n("b8b0")),c=n("901e");c["BigNumber"].config({FORMAT:{prefix:"$",decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0,suffix:""}});var m={terra1vxtwu4ehgzz77mnfwrntyrmgl64qjs75mpwqaz:"mAAPL",terra14y5affaarufk3uscy2vr6pe6w6zqf2wpjzn5sh:"mTSLA",terra1jsxngqasf2zynj5kyh0tgq9mj3zksa5gk35j4k:"mNFLX",terra1dk3g53js3034x4v5c3vavhj2738une880yu6kx:"mETH",terra1csk6tc7pdmpr782w527hwhez6gfv632tyf72cp:"mQQQ",terra1cc3enj9qgchlrj34cnzhwuclc4vl2z3jl7tkqg:"mTWTR",terra1227ppwxxj3jxz8cfgq00jgnxqcny7ryenvkwj6:"mMSFT",terra165nd2qmrtszehcfrntlplzern7zl4ahtlhd5t2:"mAMZN",terra1w7zgkcyt7y4zpct9dw8mw362ywvdlydnum2awa:"mBABA",terra10h7ry7apm55h4ez502dqdv9gr53juu85nkd4aq:"mIAU",terra1kscs6uhrqwy6rx5kuw5lwpuqvm3t6j2d6uf2lp:"mSLV",terra1lvmx8fsagy70tv0fhmfzdw9h6s3sy4prz38ugf:"mUSO",terra19cmt6vzvhnnnfsmccaaxzy2uaj06zjktu6yzjx:"mVIXY",terra1mqsjugsugfprn3cvgxsrr8akkvdxv2pzc74us7:"mFB",terra1h8arz2k547uvmpxctuwush3jzc8fun4s96qgwt:"mGOOGL",terra18wayjpyq28gd970qzgjfmsjj7dmgdk039duhph:"mCOIN",terra18yqdfzfhnguerz9du5mnvxsh5kxlknqhcxzjfr:"mHOOD",terra1qqfx5jph0rsmkur2zgzyqnfucra45rtjae5vh6:"mARKK",terra1l5lrxtwd98ylfy09fn866au6dp76gu8ywnudls:"mGLXY",terra1u43zu5amjlsgty5j64445fr9yglhm53m576ugh:"mSQ",terra1g4x2pzmkc9z3mseewxf758rllg08z3797xly0n:"mABNB",terra1aa00lpfexyycedfg5k2p60l9djcmw0ue5l8fhc:"mSPY",terra19ya4jpvjvvtggepvmmj6ftmwly3p7way0tt08r:"mDOT",terra18ej5nsuu867fkx4tuy2aglpvqjrkcrjjslap3z:"mAMD",terra137drsu8gce5thf6jr5mxlfghw36rpljt3zj73v:"mGS",terra1qsnj5gvq8rgs7yws8x5u02gwd5wvtu4tks0hjm:"mKO",terra1rh2907984nudl7vh56qjdtvv7947z4dujj92sx:"mPYPL",terra1246zy658dfgtausf0c4a6ly8sc2e285q4kxqga:"mSBUX",terra1ptdxmj3xmmljzx02nr4auwfuelmj0cnkh8egs2:"mJNJ",terra1rhhvx8nzfrx5fufkuft06q5marfkucdqwq5sjw:"mBTC",terra1drsjzvzej4h4qlehcfwclxg4w5l3h5tuvd3jd8:"mNVDA",terra1dj2cj02zak0nvwy3uj9r9dhhxhdwxnw6psse6p:"mNIO",terra149755r3y0rve30e209awkhn5cxgkn5c8ju9pm5:"mDIS",terra17ana8hvzea0q7w367dm0dw48sxwql39qekpt7g:"mNKE"},p={name:"HelloWorld",props:{msg:String},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.init(),t.next=3,e.crunchData();case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{client:void 0,uniqueWallets:{},openedPositions:[],closedPositions:[],tvl:Object(c["BigNumber"])(0),sumOpenPositionInitialSizes:Object(c["BigNumber"])(0),sumAllPositionInitialSizes:Object(c["BigNumber"])(0),sumOpenPositionSpectrumTVLContributions:Object(c["BigNumber"])(0),sumUnrealizedGain:Object(c["BigNumber"])(0),sumShortFarmValueAcrossOpenPositions:Object(c["BigNumber"])(0),sumShortFarmValueAcrossOpenPositionsWithUnrealizedGain:Object(c["BigNumber"])(0),mAssetToTVL:{}}},computed:{getTVL:function(){return this.tvl.dividedBy(Object(c["BigNumber"])(1e6)).toFormat(6)},getSumOpenPositionInitialSizes:function(){return this.sumOpenPositionInitialSizes.dividedBy(Object(c["BigNumber"])(1e6)).toFormat(6)},getSumAllPositionInitialSizes:function(){return this.sumAllPositionInitialSizes.dividedBy(Object(c["BigNumber"])(1e6)).toFormat(6)},getSumOpenPositionSpectrumTVLContributions:function(){return this.sumOpenPositionSpectrumTVLContributions.dividedBy(Object(c["BigNumber"])(1e6)).toFormat(6)},getSumUnrealizedGain:function(){return this.sumUnrealizedGain.dividedBy(Object(c["BigNumber"])(1e6)).toFormat(6)},getSumShortFarmValueAcrossOpenPositions:function(){return this.sumShortFarmValueAcrossOpenPositions.dividedBy(Object(c["BigNumber"])(1e6)).toFormat(6)},getSumShortFarmValueAcrossOpenPositionsWithUnrealizedGain:function(){return this.sumShortFarmValueAcrossOpenPositionsWithUnrealizedGain.dividedBy(Object(c["BigNumber"])(1e6)).toFormat(6)}},methods:{init:function(){for(var e in console.log("initializing..."),this.client=new l["LCDClient"]({URL:"https://thrumming-wispy-snow.terra-mainnet.quiknode.pro/767455606a361ac0fdfba9d94fbc16f307f4096b/",chainID:"columbus-5"}),m)this.mAssetToTVL[m[e]]=Object(c["BigNumber"])(0)},crunchData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,i,o,s,u,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.client){t.next=3;break}return console.log("Client is uninitialized."),t.abrupt("return");case 3:return n="terra1ajkmy2c0g84seh66apv9x6xt6kd3ag80jmcvtz",r=e.client,t.next=7,r.wasm.contractQuery(n,{get_next_position_id:{}});case 7:return i=t.sent,console.log("next position id: ",i.next_position_id),t.next=11,r.wasm.contractQuery(n,{get_strategy_metadata:{strategy_id:"0"}});case 11:for(o=t.sent,s=o.manager_addr,u=[],a=0;a<parseInt(i.next_position_id);a++)u.push(e.worker(n,s,r,a));return console.log("Waiting for ".concat(u.length," requests to complete.")),t.next=18,Promise.allSettled(u);case 18:e.openedPositions.sort(),e.closedPositions.sort(),e.isMounted=!0,console.log(e.uniqueWallets),console.log(e.openedPositions),console.log(e.closedPositions);case 24:case"end":return t.stop()}}),t)})))()},worker:function(e,t,n,r){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var s,u,a,l,p,d,f;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,n.wasm.contractQuery(e,{get_terra_position_info:{position_id:r.toString()}});case 2:return s=o.sent,u=s.holder,u in i.uniqueWallets?i.uniqueWallets[u]++:i.uniqueWallets[u]=1,o.next=7,n.wasm.contractQuery(t,{get_position_contract_addr:{position:{chain_id:3,position_id:r.toString()}}});case 7:return a=o.sent,o.next=10,n.wasm.contractQuery(a,{get_position_info:{}});case 10:l=o.sent,console.log("position_info: ",l),i.sumAllPositionInitialSizes=i.sumAllPositionInitialSizes.plus(l.position_open_info.uusd_amount),null==l.detailed_info?i.closedPositions.push(r):(i.openedPositions.push(r),i.sumOpenPositionInitialSizes=i.sumOpenPositionInitialSizes.plus(l.position_open_info.uusd_amount),i.sumOpenPositionSpectrumTVLContributions=i.sumOpenPositionSpectrumTVLContributions.plus(Object(c["BigNumber"])(l.detailed_info.state.uusd_long_farm).multipliedBy(2)),p=Object(c["BigNumber"])(l.detailed_info.state.mirror_asset_short_amount).times(Object(c["BigNumber"])(l.detailed_info.state.mirror_asset_oracle_price)),i.sumShortFarmValueAcrossOpenPositions=i.sumShortFarmValueAcrossOpenPositions.plus(p),Object(c["BigNumber"])(l.detailed_info.uusd_value)>Object(c["BigNumber"])(l.position_open_info.uusd_amount)&&(i.sumShortFarmValueAcrossOpenPositionsWithUnrealizedGain=i.sumShortFarmValueAcrossOpenPositionsWithUnrealizedGain.plus(p),i.sumUnrealizedGain=i.sumUnrealizedGain.plus(Object(c["BigNumber"])(l.detailed_info.uusd_value)-Object(c["BigNumber"])(l.position_open_info.uusd_amount))),i.tvl=i.tvl.plus(Object(c["BigNumber"])(l.detailed_info.uusd_value)),d=l.mirror_asset_cw20_addr,f=m[d],f in i.mAssetToTVL?i.mAssetToTVL[f]=i.mAssetToTVL[f].plus(Object(c["BigNumber"])(l.detailed_info.uusd_value).dividedBy(Object(c["BigNumber"])(1e6))):i.mAssetToTVL[f]=Object(c["BigNumber"])(l.detailed_info.uusd_value).dividedBy(Object(c["BigNumber"])(1e6)));case 14:case"end":return o.stop()}}),o)})))()}}},d=p,f=(n("a641"),n("2877")),g=Object(f["a"])(d,s,u,!1,null,"70726409",null),h=g.exports,v={name:"App",components:{HelloWorld:h}},_=v,j=(n("034f"),Object(f["a"])(_,i,o,!1,null,null,null)),b=j.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(b)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},"793c":function(e,t,n){},8:function(e,t){},"85ec":function(e,t,n){},9:function(e,t){},a641:function(e,t,n){"use strict";n("793c")},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.35deaa04.js.map